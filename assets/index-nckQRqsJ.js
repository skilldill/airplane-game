var I=Object.defineProperty;var A=(n,e,r)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var a=(n,e,r)=>(A(n,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();const c={timerInterval:10,sceneWidth:window.innerWidth,sceneHeight:window.innerHeight,sceneBaseColor:"#7bc8e8"};function _(){const n=document.getElementById("scene");return n.setAttribute("width",c.sceneWidth),n.setAttribute("height",c.sceneHeight),n.getContext("2d")}function M(n,e,r,s=100){let t=0;function i(o=0){if(o-t>=s){const l=r();n.forEach(u=>u(e,l)),t=o}requestAnimationFrame(i)}return i}const p=document.getElementById("btn-arrow-up"),L=document.getElementById("btn-arrow-right"),E=document.getElementById("btn-arrow-down"),x=document.getElementById("btn-arrow-left");function w(n){n.preventDefault()}function W(n){p.addEventListener("contextmenu",w),L.addEventListener("contextmenu",w),E.addEventListener("contextmenu",w),x.addEventListener("contextmenu",w);let e={horizontalTouched:"",verticalTouched:""};p.addEventListener("touchstart",()=>{e.verticalTouched="up",n(e)}),p.addEventListener("touchend",()=>{e.verticalTouched="",n(e)}),L.addEventListener("touchstart",()=>{e.horizontalTouched="right",n(e)}),L.addEventListener("touchend",()=>{e.horizontalTouched="",n(e)}),E.addEventListener("touchstart",()=>{e.verticalTouched="down",n(e)}),E.addEventListener("touchend",()=>{e.verticalTouched="",n(e)}),x.addEventListener("touchstart",()=>{e.horizontalTouched="left",n(e)}),x.addEventListener("touchend",()=>{e.horizontalTouched="",n(e)})}const H=document.getElementById("container");function B(n){H.innerHTML=`
        <div class="resultScreen">
            <h2>Вы пролетели ${n} миль</h2>
            <a href="/">
                <button>Играть снова</button>
            </a>
        </div>
    `}function S(n){return Math.floor(Math.random()*n)}class m{constructor(e,r,s,t,i){a(this,"objectsForRender",[]);a(this,"getRandomInt",e=>S(e));a(this,"checkIsRandomConditions",e=>{let r=1e4,s=[100];switch(e){case"extra-low":r=9e5;break;case"low":r=2e5;break;case"high":r=1e3,s=[10,100];break}const t=this.getRandomInt(r);return s.includes(t)});a(this,"generateObjects",(e=1,r=1,s=0,t="normal")=>{const i=this.sceneWidth*e,o=this.sceneHeight*r;for(let d=0;d<o;d++)for(let l=s;l<i;l++)this.checkIsRandomConditions(t)&&this.objectsForRender.push({x:l,y:d,initX:l})});a(this,"renderObject",(e,r,s)=>{for(let t=0;t<this.template.length;t++){const i=this.template[t];for(let o=0;o<i.length;o++){const d=i[o];d!==0&&(this.ctx.fillStyle=this.colorsMap[d],this.ctx.fillRect(e+o*s,r+t*s,s,s))}}});a(this,"moveObjects",(e=1,r=1,s=!0)=>{this.objectsForRender.forEach(t=>{s&&t.x<-this.template[0].length*r?(t.initX<this.sceneWidth?t.x=t.initX+this.sceneWidth:t.x=t.initX,t.y=this.getRandomInt(this.sceneHeight)):t.x-=e,this.renderObject(t.x,t.y,r)})});this.ctx=e,this.sceneWidth=r,this.sceneHeight=s,this.template=t,this.colorsMap=i}}class C extends m{constructor(e,r,s,t,i,o="normal"){super(e,r,s,t,i),this.generateObjects(3,1,r,o)}}class y extends m{constructor(e,r,s,t,i,o="normal"){super(e,r,s,t,i),this.generateObjects(5,1,0,o)}}class D extends m{constructor(e,r,s,t,i,o="normal"){super(e,r,s,t,i),this.generateObjects(5,1,r+20,o)}}class U extends m{constructor(e,r,s){super(e,void 0,void 0,r,s)}}class j extends m{constructor(r,s){super(r,s);a(this,"renderPowerLine",()=>{this.ctx.fillStyle="#0f0";const r=this.baseLineWidth/100*this.power;this.ctx.fillRect(20,20,r,20)});a(this,"downPower",r=>{this.power-=5,this.power<=0&&r()});a(this,"upPower",()=>{this.power+=10,this.power>100&&(this.power=100)});this.baseLineWidth=this.sceneWidth-40,this.power=100}}function N(n){n.fillStyle=c.sceneBaseColor,n.fillRect(0,0,c.sceneWidth,c.sceneHeight)}const X={1:"#f0a57a",2:"#ebdc59"},z=[[0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,2,2,2,2,2,2,1,1,0,0,0],[0,0,1,1,2,2,2,2,2,2,2,2,1,1,0,0],[0,1,1,2,2,2,2,2,2,2,2,2,2,1,1,0],[0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[0,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1],[0,1,1,2,2,2,2,2,2,2,2,2,2,1,1,0],[0,0,1,1,2,2,2,2,2,2,2,2,1,1,0,0],[0,0,0,1,1,2,2,2,2,2,2,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0]],P={1:"#ebfafa",2:"#fff"},T=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0],[0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,2,2,2,1,1,1,1,1,1,1,1],[1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1],[1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,1,1,1],[1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1],[0,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,0],[0,0,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,0,0]],k={1:"#444",2:"#fff",3:"#e4e4e4",4:"#cf3254"},F=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,1,1,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,1,1,1,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,1,1,1,1,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,1,1,1,1,1,1,4,4,4,4,4,4],[4,4,4,4,4,4,1,1,1,1,1,1,1,1,4,4,4,4,4],[4,4,4,4,4,1,1,2,2,1,1,1,1,1,1,4,4,4,4],[4,4,4,4,1,1,1,2,2,1,1,1,1,1,1,4,4,4,4],[4,4,4,4,1,1,3,3,1,1,1,1,1,1,1,4,4,4,4],[4,4,4,4,1,1,3,3,1,1,1,1,1,1,1,4,4,4,4],[4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4],[4,4,4,4,4,1,1,1,1,1,1,1,1,1,4,4,4,4,4],[4,4,4,4,4,4,1,1,1,1,1,1,1,4,4,4,4,4,4],[4,4,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,1,1,1,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],Y={1:"#fff",2:"#e0e0e0",3:"#324ccf"},q=[[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,3,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,0],[0,0,1,1,1,1,1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,1,3,3],[0,0,3,3,3,3,3,3,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,3,3,3,3,1,1,1,1,2,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,3,3,3,1,1,1,1,2,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,3,3,3,0,0,0,0,2,1,1,1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,1,1,1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,1,1,1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],f={airplanePosX:40,airplanePosY:300};let O={verticalTouched:"",horizontalTouched:""};function G(){switch(O.verticalTouched){case"up":f.airplanePosY-=10;break;case"down":f.airplanePosY+=10;break}switch(O.horizontalTouched){case"left":f.airplanePosX-=5;break;case"right":f.airplanePosX+=5;break}return f}function K(n){O=n}let g=0,R=!1;const $=document.getElementById("milles-display");function J(){const n=_(),e=new y(n,c.sceneWidth,c.sceneHeight,T,P,"low"),r=new y(n,c.sceneWidth,c.sceneHeight,T,P,"low");new C(n,c.sceneWidth,c.sceneHeight,z,X,"extra-low");const s=new D(n,c.sceneWidth,c.sceneHeight,F,k,"extra-low"),t=new j(n,c.sceneWidth),i=new U(n,q,Y);let o=[N,()=>e.moveObjects(1,2),()=>r.moveObjects(2,8),()=>s.moveObjects(4,1),(l,u)=>i.renderObject(u.airplanePosX,u.airplanePosY,3),(l,{airplanePosX:u,airplanePosY:v})=>{const b=s.objectsForRender.findIndex(h=>h.x>=u&&h.x<=u+50&&h.y>=v-30&&h.y<=v+80);if(b>-1){const h=s.objectsForRender[b];h.x=h.initX,h.y=S(c.sceneHeight),t.upPower()}},t.renderPowerLine,()=>{R||(g+=1,g%50===0&&($.innerText=g/10,t.downPower(()=>{B(g/10),R=!0})))}];W(K),M(o,n,G,c.timerInterval)()}J();
